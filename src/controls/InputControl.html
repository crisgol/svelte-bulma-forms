<div class="control{expandClass}{iconLeft ? ' has-icons-left' : ''}{iconRight ? ' has-icons-right' : ''}">
  <input 
    class="input{stateClass}{sizeClass}{rounded ? ' is-rounded' : ''}" 
    id="{_id}"
    {type} 
    {name}
    {placeholder}
    {required}
    {disabled}
    {value}
    {readonly}
    autocomplete="{placeholder}" 
    on:change="fire('change', event)"
  >
{#if iconLeft}
  <span class="icon is-small is-left">
    <i class="{iconLeft}"></i>
  </span>
{/if}
{#if iconRight}
  <span class="icon is-small is-right">
    <i class="{iconRight}"></i>
  </span>
{/if}
</div>

<script>
import uuid from 'random-uuid-v4'
import { expandClass, sizeClass, stateClass } from '../helpers'

export default {
  computed: {
    _id: ({ id }) => id || uuid(),
    expandClass: ({ expanded }) => expandClass(expanded),
    sizeClass: ({ size }) => sizeClass(size),
    stateClass: ({ state }) => stateClass(state)
  },
  data () {
    return {
      disabled: false,
      expanded: false,
      iconLeft: null,
      iconRight: null,
      id: '',
      name: '',
      placeholder: '',
      readonly: false,
      required: false,
      rounded: false,
      size: null,
      state: null,
      type: 'text',
      value: ''
    }
  }
}
</script>
