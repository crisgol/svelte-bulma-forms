<InputField 
  type="text"
  {name}
  {placeholder}
  {help}
  {iconLeft}
  {iconRight}
  {addOn}
  {horizontal}
  {label}
  {state}
  {size}
  {required}
  {disabled}
  {value}
  {rounded}
  {readonly}
  on:change="changeValue(event)"
>
  <slot><!-- addon is injected here --></slot>
</InputField>

<script>
import { validate, required } from '../validation'

export default {
  components: {
    InputField: './InputField.html'
  },
  data () {
    return {
      name: '',
      placeholder: '',
      help: '',
      iconLeft: null,
      iconRight: null,
      addOn: null,
      horizontal: false,
      label: '',
      state: null,
      size: null,
      required: false,
      disabled: false,
      rounded: false,
      readonly: false,
      value: '',
      validation: required
    }
  },
  methods: {
    changeValue (input) {
      const { required } = this.get()
      if (!required || validate(this, input)) {
        this.fire('change', input)
      }
    }
  },
  onstate ({ previous }) {
    if (Object.entries(this._slotted).length && !previous) {
      this.set({ addOn: true })
    }
  }
}
</script>
